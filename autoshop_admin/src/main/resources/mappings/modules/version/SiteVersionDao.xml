<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zhilai.master.modules.version.dao.SiteVersionDao">
 	<resultMap type="com.zhilai.master.modules.version.entity.SiteVersion" id="SiteVersionResultMap">
 		<id property="logid" column="logid"/>
 		<result property="tree_id" column="tree_id" />
 		<result property="tree_name" column="tree_name" />
 		<result property="site_id" column="site_id" />
 		<result property="site_name" column="site_name" />
 		<result property="plat_code" column="plat_code" />
 		<result property="plat_name" column="plat_name" />
 		<result property="plat_version" column="plat_version" />
 		<result property="upgrade_state" column="upgrade_state" />
 		<result property="upgrade_stime" column="upgrade_stime" />
 		<result property="upgrade_etime" column="upgrade_etime" />
 		<result property="allowUpg_stime" column="allowUpg_stime" />
 		<result property="allowUpg_stime" column="allowUpg_stime" />
 		<result property="allowUpg_etime" column="allowUpg_etime" />
 		<result property="ugstate_time" column="ugstate_time" />
 		<result property="create_time" column="create_time" />
 		<result property="cur_state" column="cur_state" />
 		<result property="state_time" column="state_time" />
 	</resultMap>
    
	<select id="get" resultMap="SiteVersionResultMap">
		SELECT  *  FROM as_site_version WHERE  logid = #{logid}
	</select>
	
	<select id="findList" resultMap="SiteVersionResultMap">
		SELECT * FROM as_site_version where 1=1
		<if test="plat_code != null and plat_code != ''">
			AND plat_code = #{plat_code}
		</if>
		<if test="site_id != null and site_id != ''">
			AND site_id = #{site_id}
		</if>
		<if test="site_name != null and site_name != ''">
			AND site_name  LIKE CONCAT('%',#{site_name}, '%')
		</if>
		<if test="tree_id != null and tree_id != ''">
			AND tree_id = #{tree_id}
		</if>
		<if test="tree_name != null and tree_name != ''">
			AND tree_name  LIKE CONCAT('%',#{tree_name}, '%')
		</if>
		<if test="plat_version != null and plat_version != ''">
			AND plat_version = #{plat_version}
		</if>
		<if test="plat_name != null and plat_name != ''">
			AND plat_name  LIKE CONCAT('%',#{plat_name}, '%')
		</if>
		<if test="create_time != null and create_time != '' ">
			AND create_time  <![CDATA[>= ]]>  #{create_time}
		</if>
		ORDER BY create_time desc
	</select>

	
	<select id="findAllList" resultMap="SiteVersionResultMap">
		SELECT  *  FROM as_site_version ORDER BY create_time 
	</select>
	<insert id="insert">
			INSERT INTO as_site_version(logid,tree_id,tree_name,site_id,site_name,plat_code,plat_name,plat_version,upgrade_state,upgrade_stime,upgrade_etime,allowUpg_stime,allowUpg_etime,ugstate_time
			,create_time,cur_state,state_time)
			values(#{logid},#{tree_id},#{tree_name},#{site_id},#{site_name},#{plat_code},#{plat_name},#{plat_version},#{upgrade_state},#{upgrade_stime},#{upgrade_etime},#{allowUpg_stime},#{allowUpg_etime},#{ugstate_time}
			,#{create_time},#{cur_state},#{state_time})
	</insert>
	<update id="update">
		update as_site_version set tree_id=#{tree_id},tree_name=#{tree_name},site_id=#{site_id},site_name=#{site_name},plat_code=#{plat_code},
		plat_name=#{plat_name},plat_version=#{plat_version},upgrade_state=#{upgrade_state},upgrade_stime=#{upgrade_stime},upgrade_etime=#{upgrade_etime},allowUpg_stime=#{allowUpg_stime},
		ugstate_time=#{ugstate_time},allowUpg_etime=#{allowUpg_etime},create_time=#{create_time},cur_state=#{cur_state},state_time=#{state_time}	
		where logid=#{logid}
	</update>
	
	<delete id="delete">
		delete from as_site_version where logid = #{logid}
	</delete>
	
</mapper>