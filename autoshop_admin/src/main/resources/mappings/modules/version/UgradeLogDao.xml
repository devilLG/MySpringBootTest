<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zhilai.master.modules.version.dao.UgradeLogDao">
 	<resultMap type="com.zhilai.master.modules.version.entity.UgradeLog" id="UgradeLogResultMap">
 		<id property="logid" column="logid"/>
 		<result property="tree_id" column="tree_id" />
 		<result property="tree_name" column="tree_name" />
 		<result property="site_id" column="site_id" />
 		<result property="site_name" column="site_name" />
 		<result property="plat_code" column="plat_code" />
 		<result property="plat_name" column="plat_name" />
 		<result property="plat_version" column="plat_version" />
 		<result property="newp_version" column="newp_version" />
 		<result property="action_type" column="action_type" />
 		<result property="create_time" column="create_time" />
 		<result property="ret_code" column="ret_code" />	
 	</resultMap>
    
	<select id="get" resultMap="UgradeLogResultMap">
		SELECT  *  FROM as_ugrade_log WHERE  logid = #{logid}
	</select>
	
	<select id="findList" resultMap="UgradeLogResultMap">
		SELECT * FROM as_ugrade_log where 1=1
		<if test="plat_code != null and plat_code != ''">
			AND plat_code = #{plat_code}
		</if>
		<if test="site_id != null and site_id != ''">
			AND site_id = #{site_id}
		</if>
		<if test="site_name != null and site_name != ''">
			AND site_name  LIKE CONCAT('%',#{site_name}, '%')
		</if>
		<if test="tree_id != null and tree_id != ''">
			AND tree_id = #{tree_id}
		</if>
		<if test="tree_name != null and tree_name != ''">
			AND tree_name  LIKE CONCAT('%',#{tree_name}, '%')
		</if>
		<if test="plat_version != null and plat_version != ''">
			AND plat_version = #{plat_version}
		</if>
		<if test="plat_name != null and plat_name != ''">
			AND plat_name  LIKE CONCAT('%',#{plat_name}, '%')
		</if>
		<if test="create_time != null and create_time != '' ">
			AND create_time  <![CDATA[>= ]]>  #{create_time}
		</if>
		ORDER BY create_time desc
	</select>

	
	<select id="findAllList" resultMap="UgradeLogResultMap">
		SELECT  *  FROM as_ugrade_log ORDER BY create_time 
	</select>
	
</mapper>