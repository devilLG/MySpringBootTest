<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zhilai.master.modules.site.dao.SiteCmdDao">
 	<resultMap type="com.zhilai.master.modules.site.entity.SiteCmd" id="SiteCmdResultMap">
 		<id property="logid" column="logid"/>
 		<result property="cmd_id" column="cmd_id" />
 		<result property="corp_id" column="corp_id" />
 		<result property="site_id" column="site_id" />
 		<result property="site_name" column="site_name" />
 		<result property="cmd_val" column="cmd_val" />
 		<result property="cmd_obj" column="cmd_obj" />
 		<result property="cmd_type" column="cmd_type" />
 		<result property="down_state" column="down_state" />
 		<result property="down_time" column="down_time" />
 		<result property="create_time" column="create_time" />
 	</resultMap>
    
	<select id="get" resultMap="SiteCmdResultMap">
		SELECT  *  FROM as_site_cmd WHERE  cmd_id = #{cmd_id}
	</select>
	
	<select id="findList" resultMap="SiteCmdResultMap">
		SELECT * FROM as_site_cmd where 1=1
		<if test="cmd_id != null and cmd_id != ''">
			AND cmd_id = #{cmd_id}
		</if>
		<if test="corp_id != null and corp_id != ''">
			AND corp_id = #{corp_id}
		</if>
		<if test="site_name != null and site_name != ''">
			AND site_name  LIKE CONCAT('%',#{site_name}, '%')
		</if>
		<if test="cmd_val != null and cmd_val != ''">
			AND cmd_val = #{cmd_val}
		</if>
		<if test="cmd_obj != null and cmd_obj != ''">
			AND cmd_obj = #{cmd_obj}
		</if>
		<if test="cmd_type != null and cmd_type != ''">
			AND cmd_type = #{cmd_type}
		</if>
		<if test="down_state != null and down_state != ''">
			AND down_state = #{down_state}
		</if>
		<if test="create_time != null and create_time != '' ">
			AND create_time  <![CDATA[>= ]]>  #{create_time}
		</if>
		ORDER BY create_time desc
	</select>

	
	<select id="findAllList" resultMap="SiteCmdResultMap">
		SELECT  *  FROM as_site_cmd ORDER BY create_time 
	</select>
	<insert id="insert">
			INSERT INTO as_site_cmd(logid,cmd_id,corp_id,site_id,site_name,cmd_val,cmd_obj,
			cmd_type,down_state,down_time,create_time)
			values(#{logid},#{cmd_id},#{corp_id},#{site_id},#{site_name},#{cmd_val},#{cmd_obj},
			#{cmd_type},#{down_state},#{down_time},#{create_time})
	</insert>
	<update id="update">
		update as_site_cmd set corp_id=#{corp_id},site_id=#{site_id},
		site_name=#{site_name},cmd_val=#{cmd_val},cmd_obj=#{cmd_obj},cmd_type=#{cmd_type},
		down_state=#{down_state},down_time=#{down_time},create_time=#{create_time}	
		where cmd_id=#{cmd_id}
	</update>
	
	<delete id="delete">
		delete from as_site_cmd where cmd_id = #{cmd_id}
	</delete>
	
</mapper>