<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zhilai.master.modules.broadcast.dao.AdvertConfigDao">
	
	<select id="get" resultType="AdvertConfig">
		SELECT 
			* 
		FROM as_advert_config 
		WHERE logid = #{logid}
	</select>
	
	<select id="findList" resultType="AdvertConfig">
		SELECT 
			* 
		FROM as_advert_config  
		WHERE 1=1
		<if test="configName != null and configName != ''">
			AND (config_name = #{configName} OR config_name LIKE 
				<if test="dbName == 'oracle'">'%'||#{configName}||'%')</if>
				<if test="dbName == 'mssql'">'%'+#{configName}+'%')</if>
				<if test="dbName == 'mysql'">CONCAT('%', #{configName}, '%'))</if>
		</if>
		<if test="planEtime != null and planEtime != ''">
			AND (plan_stime &lt;= #{planEtime} )
			AND (plan_etime &gt;= #{planEtime} )
		</if>
		ORDER BY state_time DESC , create_time DESC
	</select>
	

	<insert id="insert">
		INSERT INTO as_advert_config(
			logid,
			config_id,
			config_name, 
			corp_id, 
			corp_name, 
			is_defalut, 
			plan_stime, 
			plan_etime, 
			area_num,
			media_num,
			resolution_x,
			resolution_y,
			play_time,
			description,
			cur_state,
			state_time,
			create_time
		) VALUES (
			#{logid},
			#{configId},
			#{configName}, 
			#{corpId}, 
			#{corpName}, 
			#{isDefalut}, 
			#{planStime}, 
			#{planEtime}, 
			#{areaNum},
			#{mediaNum},
			#{resolutionX},
			#{resolutionY},
			#{playTime},
			#{description},
			#{curState},
			#{stateTime},
			#{createTime}
		)
	</insert>
	
 
 	<update id="update">
		update as_advert_config set 
		config_Name=#{configName},
		corp_id=#{corpId},
		corp_name=#{corpName},
		is_defalut=#{isDefalut},
		plan_stime=#{planStime},
		plan_etime=#{planEtime},
		area_num=#{areaNum},
		media_num=#{mediaNum},
		resolution_x=#{resolutionX},
		resolution_y=#{resolutionY},
		play_time=#{playTime},
		description=#{description}
	</update>
		

	
 	<delete id="delete">
		delete from as_advert_config where logid=#{logid}
	</delete>
</mapper>