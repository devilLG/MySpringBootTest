<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.zhilai.master.modules.inventory.dao.CheckOrderDetailDao">
	<resultMap type="com.zhilai.master.modules.inventory.entity.CheckOrderDetail" id="checkOrderDetailResultMap">
		<id property="logid" column="logid" />
		<result property="order_id" column="order_id" />
		<result property="detail_id" column="detail_id" />
		<result property="corp_id" column="corp_id" />
		<result property="corp_name" column="corp_name" />
		<result property="site_id" column="site_id" />
		<result property="site_name" column="site_name" />
		<result property="box_id" column="box_id" />
		<result property="product_id" column="product_id" />
		<result property="product_name" column="product_name" />
		<result property="check_num" column="check_num" />
		<result property="tinventory_num" column="tinventory_num" />
		<result property="winventory_num" column="winventory_num" />
		<result property="difference_num" column="difference_num" />
		<result property="check_type" column="check_type" />
		<result property="cur_state" column="cur_state" />
		<result property="state_time" column="state_time" />
		<result property="create_time" column="create_time" />
		
	</resultMap>

    <select id="get" resultMap="checkOrderDetailResultMap">
		SELECT 
			*
		FROM as_check_order_detail a
		WHERE a.logid = #{logid}
	</select>
	
	<select id="findList" resultMap="checkOrderDetailResultMap">
		SELECT 
			*
		FROM as_check_order_detail a WHERE 1=1 
		<if test="order_id != null and order_id != ''">
			AND a.order_id = #{order_id}
		</if>
		ORDER BY a.state_time DESC
	</select>

	<insert id="insert">
		insert into
		as_check_order_detail(logid,detail_id,order_id,corp_id,corp_name,site_id,site_name,box_id,product_id,product_name,check_num,tinventory_num,winventory_num,difference_num,check_type,cur_state,state_time,create_time)
		values(#{logid},#{detail_id},#{order_id},#{corp_id},#{corp_name},#{site_id},#{site_name},#{box_id},#{product_id},#{product_name},#{check_num},#{tinventory_num},#{winventory_num},#{difference_num},#{check_type},#{cur_state},#{state_time},#{create_time})
	</insert>
	
	<insert id="update">
		update as_check_order_detail set box_id=#{box_id},product_id=#{product_id},product_name=#{product_name},check_num=#{check_num},tinventory_num=#{tinventory_num},winventory_num=#{winventory_num},difference_num=#{difference_num},check_type=#{check_type},cur_state=#{cur_state},state_time=#{state_time},create_time=#{create_time}
		where logid=#{logid}
	</insert>
	
	<delete id="delete">
	    delete from as_check_order_detail where order_id=#{order_id}
	</delete>
</mapper>