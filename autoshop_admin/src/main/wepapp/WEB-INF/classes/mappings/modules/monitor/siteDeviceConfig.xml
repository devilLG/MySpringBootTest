<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zhilai.master.modules.monitor.dao.SiteDeviceConfigDao">
	
	<select id="get" resultType="SiteDeviceConfig">
		SELECT 
			* 
		FROM as_site_device_config 
		WHERE sdevice_id = #{sdeviceId}
	</select>
	
	<select id="findList" resultType="SiteDeviceConfig">
		SELECT 
			a.* 
		FROM as_site_device_config  a, as_site b
		WHERE 1=1
		<if test="deviceId != null and deviceId != ''">
				AND a.device_id = #{deviceId}
		</if>
		<if test="siteId != null and siteId != ''">
				AND a.site_id = #{siteId}
		</if>
		<if test="siteName != null and siteName != ''">
				AND a.site_name = #{siteName}
		</if>
		<if test="curState != null and curState != ''">
				AND a.cur_state = #{curState}
		</if>
		<if test="checkState != null and checkState != ''">
				AND a.check_state = #{checkState}
		</if>
		<if test="corp_id != null and corp_id != ''">
				AND (a.site_id = b.site_id and b.owner_id = #{corp_id})
		</if>
		ORDER BY a.state_time DESC
	</select>
	
	<insert id="insert">
		INSERT INTO as_site_device_config(
			logid,
			sdevice_id,
			site_id, 
			site_name, 
			device_id,
			device_code, 
			device_name, 
			device_model, 
			device_bard, 
			device_mfrs, 
			error_level,
			cur_state,
			state_time,
			cont,
			maintenance,
			pcheck_time,
			lcheck_time,
			check_state,
			create_time
		) VALUES (
			#{logid},
			#{sdeviceId},
			#{siteId},
			#{siteName},
			#{deviceId},
			#{deviceCode}, 
			#{deviceName}, 
			#{deviceModel}, 
			#{deviceBard}, 
			#{deviceMfrs},
			#{errorLevel},
			#{curState},
			#{stateTime},
			#{cont},
			#{maintenance},
			#{pcheckTime},
			#{lcheckTime},
			#{checkState},
			#{createTime}
		)
	</insert>

	<delete id="deleteBysid">
	    delete from as_site_device_config where site_id = #{site_id}
	</delete>
	
</mapper>