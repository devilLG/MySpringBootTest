<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zhilai.master.modules.site.dao.SiteControlDao">

	<resultMap type="com.zhilai.master.modules.site.entity.SiteControl" id="siteControlResultMap">
		<id property="logid" column="logid" />
		<result property="trade_code" column="trade_code" />
		<result property="trade_name" column="trade_name" />
		<result property="site_id" column="site_id" />
		<result property="site_name" column="site_name" />
		<result property="create_time" column="create_time" />
		<result property="update_time" column="update_time" />
		<result property="push_time" column="push_time" />
		<result property="push_id" column="push_id" />
	</resultMap>
	<insert id="insert">
		insert into
		as_site_control(logid,site_id,site_name,trade_code,trade_name,push_time,push_id,create_time,update_time)
		values(
		#{logid},#{site_id},#{site_name},#{trade_code},#{trade_name},#{push_time},#{push_id},#{create_time},#{update_time})
	</insert>

	<select id="findAll" parameterType="String" resultMap="siteControlResultMap">
		select *
		from as_site_control where 1=1
		<if test="site_name != null and site_name!= '' ">
			and site_name like CONCAT('%',#{site_name},'%')  
		</if>
		<if test="site_id != null and site_id != '' ">
			and site_id= #{site_id} 
		</if>
		<if test="trade_code != null and trade_code != '' ">
			and trade_code= #{trade_code} 
		</if>
		order by site_id DESC,seq_id DESC,trade_code DESC
	</select>
	
	 <select id="findByIds" parameterType="com.zhilai.master.modules.site.entity.SiteControl" resultMap="siteControlResultMap">
		select * from as_site_control t where logid in(${logid}) order by site_id DESC,trade_code DESC
	</select>
	
	<update id="update" parameterType="com.zhilai.master.modules.site.entity.SiteControl">
		update as_site_control set create_time=create_time
		<if test="site_id != null and site_id != '' ">
			,site_id=#{site_id}
	  	</if>
		<if test="trade_code != null and trade_code != '' ">
			,trade_code=#{trade_code}
		</if>
		<if test="trade_name != null and trade_name != '' ">
			,trade_name= #{trade_name}
		</if>
		<if test="update_time != null and update_time != '' ">
			,update_time= #{update_time}
		</if>
		<if test="site_name != null and site_name != '' ">
			,site_name= #{site_name}
		</if>
		<if test="push_time != null and push_time != '' ">
			,push_time= #{push_time}
		</if>
		<if test="push_id != null and push_id != '' ">
			,push_id= #{push_id}
		</if>
		where logid=#{logid}
	</update>
	<select id="findOne" resultType="com.zhilai.master.modules.site.entity.SiteControl"
		parameterType="com.zhilai.master.modules.site.entity.SiteControl">
		select * from as_site_control t where
		site_id=#{site_id}
		and trade_code=#{trade_code}
	</select>
	
	<delete id="delete" parameterType="String">
	delete from as_site_control where logid=#{logid}
	</delete>
	
	<delete id="deleteList" parameterType="com.zhilai.master.modules.site.entity.SiteControl">
	delete from as_site_control where logid in(${logid})
	</delete>
	
	<select id="findByLogid" parameterType="String" resultMap="siteControlResultMap">
		select * from as_site_control where logid=#{logid}
	</select>
	<delete id="deleteBySiteId" parameterType="com.zhilai.master.modules.site.entity.SiteControl">
	   delete from as_site_control where site_id=#{site_id} and trade_code=#{trade_code}
	</delete>
	
	<select id="findDistintSiteId" parameterType="java.util.List" resultMap="siteControlResultMap">
		SELECT DISTINCT site_id FROM as_site_control WHERE logid in
		<foreach item="item" index="index" collection="list" open="(" separator="," close=")">
			#{item.logid}
		</foreach>
	</select>
	<delete id="deleteObj" parameterType="com.zhilai.master.modules.site.entity.SiteControl">
	      delete from as_site_control where site_id=#{site_id} and trade_code=#{trade_code}
	</delete>
</mapper> 

